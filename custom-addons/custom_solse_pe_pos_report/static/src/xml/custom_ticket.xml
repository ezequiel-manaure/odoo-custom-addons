<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">

        <!-- Encabezado con 5 columnas -->
        <xpath expr="//table[hasclass('tabla')]/tr[1]" position="replace">
            <tr style="font-size: 9px; font-weight: bold; text-transform: uppercase;">
                <td style="width: 14%; text-align: center; padding: 0 4px;">RI</td>
                <td style="width: 40%; padding: 0 4px;">Producto</td>
                <td style="width: 10%; text-align: center; padding: 0 4px;">Cant.</td>
                <td style="width: 16%; text-align: right; padding: 0 4px;">P.Unit</td>
                <td style="width: 20%; text-align: right; padding: 0 4px;">Total</td>
            </tr>
        </xpath>

        <!-- Separador ajustado al nuevo colspan -->
        <xpath expr="//table[hasclass('tabla')]/tr[2]" position="replace">
            <tr>
                <td colspan="5" style="width: 100%; padding: 0;">
                    <div style="height: 0; width: 100%; border-top: 1px dotted #000;"></div>
                    <div style="height: 0; width: 100%; border-top: 1px dotted #000;"></div>
                </td>
            </tr>
        </xpath>

        <!-- Ajuste de la tabla -->
        <xpath expr="//table[hasclass('tabla')]" position="attributes">
            <attribute name="style">width: 100%; font-size: 11px; table-layout: fixed; border-spacing: 0;</attribute>
        </xpath>

        <!-- Filas de detalle -->
        <xpath expr="//table[hasclass('tabla')]//t[@t-foreach='lines']//tr" position="replace">
            <tr style="font-size: 10px;">
                <!-- RI -->
                <td style="width: 14%; text-align: center; padding: 0 4px; border-top: 1px dotted #000;">
                    <t t-esc="line.default_code"/>
                </td>
                <!-- Producto (permitir múltiples líneas) -->
                <td style="width: 40%; padding: 0 4px; border-top: 1px dotted #000; word-wrap: break-word;">
                    <t t-esc="line.productName"/>
                </td>
                <!-- Cantidad -->
                <td style="width: 10%; text-align: center; padding: 0 4px; border-top: 1px dotted #000;">
                    <t t-esc="line.qty"/> <span style="font-size: 8px; color: #777;"><t t-esc="line.unit"/></span>
                </td>
                <!-- Precio Unitario -->
                <td style="width: 16%; text-align: right; padding: 0 4px; border-top: 1px dotted #000;">
                    <t t-esc="line.unitPrice"/>
                </td>
                <!-- Total -->
                <td style="width: 20%; text-align: right; font-weight: bold; padding: 0 4px; border-top: 1px dotted #000;">
                    <t t-esc="line.price"/>
                </td>
            </tr>
        </xpath>

    </t>
</templates>

